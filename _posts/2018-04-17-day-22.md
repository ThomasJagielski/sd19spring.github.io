---
categories: ['debugging', 'profiling']
---

{% include toc %}

## For Next Time
* Prepare for Architecture Review 2

## Interactive Debugging in Python

One of the methods of debugging we've used so far in this class is print statement debugging.  Print statement debugging is fantastic, however, there are some shortcomings.  Take a minute and at your table discuss some less-than-ideal aspects of print statement debugging.

Another form of debugging is to use a tool that allows interactive engagement with either a crashed or running program.  The Python DeBugger (pdb) can be used in roughly these two modes: postmortem analysis and live execution.  Today we will only be covering the usage in live execution mode (for a discussion of using pdb for postmortem analysis check out the pdb documentation under "analyzing a crashed program").

There are a variety of approaches to using PDB in this capacity.  One method is to add the `pdb.set_trace` command to your program to tell the debugger to pause execution at a particular location and enter interactive mode.

``` python
import pdb

def factorial(n):
    """ Computes the factorial of the non-negative integer n """
    return_val = 1
    pdb.set_trace()
    for i in range(n):
        return_val *= i
    return return_val

if __name__ == '__main__':
    print(factorial(5))
```

Let's debug this one together.

Some important commands for pdb:
* c - continue until next set_trace or breakpoint
* n - next line in current function
* s - step until first opportunity to stop (either in current function or a called function)
* l - source code listing
* a - arguments of function
* d - down a level in the stack diagram
* u - up a level in the stack diagram
* p - print the value of an expression
* w - where are you in the stack

There are some good PDB tutorials available online that are worth looking at.  Consider checking out Real Python's tutorial [Python Debugging With PDB](https://realpython.com/python-debugging-pdb/).

### Practice Problem 1
``` python
def cumulative_sum(L):
    """ returns a list where each element in the returned list is the
        cumulative sum of the elements up to the corresponding element in
    the original list.

    L: the original list
    returns: a new list where element i is equal to the sum of element
         0 through i in the original list """
    for i in range(len(L)):
        L[i] = L[i-1] + L[i]
    return L

if __name__ == '__main__':
    print(cumulative_sum([1, 2, 3]))
```

### Practice Problem 2

``` python
def get_primes(n):
    """ Returns a list of all prime integers in the range [1,n] """
    return_val = []
    isPrime = True

    for i in range(1, n+1):
        for j in range(1, i):
            if i % j == 0:
                isPrime = False
        if isPrime:
            return_val.append(i)
    return return_val

if __name__ == '__main__':
    print(get_primes(7))
```

### Practice Problem 3
``` python
def get_doubles_then_triples(L):
    """ Returns a new list containing the original list with each element
        multiplied by 2 concatenated with the original list with each element
        multiplied by 3 """
    doubles = get_multiple_of_list(L, 2)
    triples = get_multiple_of_list(L, 3)
    return doubles + triples

def get_multiple_of_list(L, n):
    for i in range(len(L)):
        L[i] *= n
    return L

if __name__ == '__main__':
    print(get_doubles_then_triples([1, 4, 8]))
```

### Practice Problem 4

``` python
class Kangaroo(object):
    """a Kangaroo is a marsupial"""

    def __init__(self, contents=[]):
        """initialize the pouch contents; the default value is
        an empty list"""
        self.pouch_contents = contents

    def __str__(self):
        """return a string representaion of this Kangaroo and
        the contents of the pouch, with one item per line"""
        t = [ object.__str__(self) + ' with pouch contents:' ]
        for obj in self.pouch_contents:
            s = '    ' + object.__str__(obj)
            t.append(s)
        return '\n'.join(t)

    def put_in_pouch(self, item):
        """add a new item to the pouch contents"""
        self.pouch_contents.append(item)

kanga = Kangaroo()
roo = Kangaroo()
kanga.put_in_pouch('wallet')
kanga.put_in_pouch('car keys')
kanga.put_in_pouch(roo)

print(kanga)
print(roo)
```

### Resources for Debugging
